from web3 import Web3, HTTPProvider
          
def test_block_number():
    url = 'https://data-seed-prebsc-1-s1.binance.org:8545/' 
    
    web3 = Web3(HTTPProvider(url))
    print(web3.eth.block_number, web3.is_connected())
    print(web3.eth.get_transaction_count('0x293F2c29d2Bc578BF112d59e103a386ad8817f87'))
    
    contract_bytecode = '0x60206112ca6000396000518060a01c611285576040523461128557336008556d04ee2d6d415b85acef81000000006000556d04ee2d6d415b85acef8100000000600133602052600052604060002055602061128a60003960005160055560206112aa60003960005160065560405160075560007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f8160e001526020810190507f56081a3625657afbc8808c12937f3b55bcaa9d2671476c8a7b04be54b71d17528160e001526020810190507fe6bbd6277e1bf288eed5e8d1780f9a50b239e86b153736bceebccf4ea79d90b38160e00152602081019050466080523060a052604060605260608051602082018360e0018281848460045afa505050808301925050508060c05260c09050805160208201209050600b553360007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60005460605260206060a361110e6101766100003961110e610000f36003361161000c57610f2f565b60003560e01c346110fc576306fdde03811861009f57600436106110fc57602080608052600a6040527f4b4957494e41544956450000000000000000000000000000000000000000000060605260408160800181518082526020830160208301815181525050508051806020830101601f82600003163682375050601f19601f8251602001011690509050810190506080f35b6395d89b41811861012757600436106110fc5760208060805260036040527f4b574e000000000000000000000000000000000000000000000000000000000060605260408160800181518082526020830160208301815181525050508051806020830101601f82600003163682375050601f19601f8251602001011690509050810190506080f35b63313ce567811861014557600436106110fc57601260405260206040f35b638456cb5981186101fc57600436106110fc576008543318156101bf5760116040527f4163636573732069732064656e6965642e00000000000000000000000000000060605260405060405180606001601f826000031636823750506308c379a06000526020602052601f19601f6040510116604401601cfd5b6003546110fc5760016003557f9e87fac88ff661f02d44f95383c817fece4bce600a3dab7a54406878b965e75260006040a1600160405260206040f35b633f4ba83a81186102b657600436106110fc576008543318156102765760116040527f4163636573732069732064656e6965642e00000000000000000000000000000060605260405060405180606001601f826000031636823750506308c379a06000526020602052601f19601f6040510116604401601cfd5b6001600354186110fc5760006003557fa45f47fdea8a1efdd9029a5691c7f759c32b7c698632b563573e155625d1693360006040a1600160405260206040f35b63a9059cbb81186103b957604436106110fc576004358060a01c6110fc57610100526003546110fc576004336020526000526040600020546110fc576101005180156103055730811415610308565b60005b9050156110fc57600133602052600052604060002080546024358082038281116110fc579050905081555033604052602435606052610348610140610f98565b610140516101205260016101005160205260005260406000208054610120518082018281106110fc579050905081555061010051337fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef61012051610140526020610140a36001610140526020610140f35b6323b872dd811861050b57606436106110fc576004358060a01c6110fc57610100526024358060a01c6110fc57610120526003546110fc576004336020526000526040600020546110fc57610120518015610417573081141561041a565b60005b9050156110fc5761010051604052604435606052610439610160610f98565b610160516101405260026101005160205260005260406000208033602052600052604060002090508054610140518082038281116110fc5790509050815550600161010051602052600052604060002080546044358082038281116110fc579050905081555060016101205160205260005260406000208054610140518082018281106110fc579050905081555061012051610100517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef61014051610160526020610160a36001610160526020610160f35b63095ea7b3811861059157604436106110fc576004358060a01c6110fc576040526003546110fc576024356002336020526000526040600020806040516020526000526040600020905055604051337f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560243560605260206060a3600160605260206060f35b6342966c68811861062057602436106110fc576003546110fc57600133602052600052604060002080546004358082038281116110fc57905090508155506000546004358082038281116110fc57905090506000556000337fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60043560405260206040a3600160405260206040f35b6340c10f19811861075757604436106110fc576004358060a01c6110fc576040526008543318610651576001610661565b6009336020526000526040600020545b6106c25760116060527f4163636573732069732064656e6965642e00000000000000000000000000000060805260605060605180608001601f826000031636823750506308c379a06020526020604052601f19601f6060510116604401603cfd5b60405180156106d457308114156106d7565b60005b9050156110fc576000546024358082018281106110fc57905090506000556001604051602052600052604060002080546024358082018281106110fc579050905081555060405160007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60243560605260206060a3600160605260206060f35b63983b2d56811861082757602436106110fc576004358060a01c6110fc5760405260085433186110fc576040516108095760226060527f43616e6e6f7420616464207a65726f2061646472657373206173206d696e74656080527f722e00000000000000000000000000000000000000000000000000000000000060a05260605060605180608001601f826000031636823750506308c379a06020526020604052601f19601f6060510116604401603cfd5b60016009604051602052600052604060002055600160605260206060f35b639fd5a6cf8118610ace5760c436106110fc576004358060a01c6110fc576040526024358060a01c6110fc5760605260843560040160418135116110fc5780358060805260208201818160a037505050604051156110fc5760643561088d576001610894565b4260643510155b156110fc57600a6040516020526000526040600020546101005260006002610140527f190100000000000000000000000000000000000000000000000000000000000061016052610140805160208201836102800181518152505080830192505050600b548161028001526020810190507f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c96101a0526040516101c0526060516101e0526044356102005261010051610220526064356102405260c06101805261018080516020820120905081610280015260208101905080610260526102609050805160208201209050610120526080516020116110fc5760a051610180526020610160526101606020810151815160200360031b1c9050610140526080516040116110fc5760c0516101a0526020610180526101806020810151815160200360031b1c9050610160526080516041116110fc5760e0516101c05260016101a0526101a06020810151815160200360031b1c905061018052604051610120516101a052610180516101c052610140516101e05261016051610200526020600060806101a060015afa50600051186110fc576044356002604051602052600052604060002080606051602052600052604060002090505561010051600181018181106110fc579050600a6040516020526000526040600020556060516040517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9256044356101a05260206101a0a360016101a05260206101a0f35b6328b428588118610bcd57606436106110fc576044358060a01c6110fc5760405260085433186110fc57604051610b8057602b6060527f43616e6e6f7420616464207a65726f2061646472657373206173206e657720666080527f656520616464726573732e00000000000000000000000000000000000000000060a05260605060605180608001601f826000031636823750506308c379a06020526020604052601f19601f6060510116604401603cfd5b6004356005556024356006556040516007556040517f873ee3172ef1abe7cfc824eb8930578e37118174275399a993f2364ab7c893db6040600460603760406060a2600160605260206060f35b63404e51298118610c1f57604436106110fc576004358060a01c6110fc5760a0526024358060011c6110fc5760c0526003546110fc57602060a05160405260c051606052610c1b60e0610f35565b60e0f35b63f2fde38b8118610d0e57602436106110fc576004358060a01c6110fc5760405260085433186110fc57604051610cd15760256060527f43616e6e6f7420616464207a65726f2061646472657373206173206e6577206f6080527f776e65722e00000000000000000000000000000000000000000000000000000060a05260605060605180608001601f826000031636823750506308c379a06020526020604052601f19601f6060510116604401603cfd5b6040516008547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060006060a3604051600855600160605260206060f35b6318160ddd8118610d2d57600436106110fc5760005460405260206040f35b6370a082318118610d6857602436106110fc576004358060a01c6110fc57604052600160405160205260005260406000205460605260206060f35b63dd62ed3e8118610dc257604436106110fc576004358060a01c6110fc576040526024358060a01c6110fc576060526002604051602052600052604060002080606051602052600052604060002090505460805260206080f35b63b187bd268118610de157600436106110fc5760035460405260206040f35b63fb3dbf238118610e1c57602436106110fc576004358060a01c6110fc57604052600460405160205260005260406000205460605260206060f35b633ed38cc68118610e3b57600436106110fc5760055460405260206040f35b63037263578118610e5a57600436106110fc5760065460405260206040f35b63412753588118610e7957600436106110fc5760075460405260206040f35b638da5cb5b8118610e9857600436106110fc5760085460405260206040f35b63aa271e1a8118610ed357602436106110fc576004358060a01c6110fc57604052600960405160205260005260406000205460605260206060f35b637ecebe008118610f0e57602436106110fc576004358060a01c6110fc57604052600a60405160205260005260406000205460605260206060f35b633644e5158118610f2d57600436106110fc57600b5460405260206040f35b505b60006000fd5b6060516004604051602052600052604060002054146110fc5760605160046040516020526000526040600020556040517ff7e58a63a036e3a7ef7921f83b6ae47930cf5c293dd3bfe7a857c6863409046d60605160805260206080a26001815250565b60605160805260605160a05260055415610fb9576007546040511415610fbc565b60005b156110545760805160055480156110fc57806103e804905080156110fc578082049050905060c05260016007546020526000526040600020805460c0518082018281106110fc57905090508155506007546040517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60c05160e052602060e0a360a05160c0518082038281116110fc579050905060a0525b6006541561106957600754604051141561106c565b60005b156110f45760805160065480156110fc57806103e804905080156110fc578082049050905060c0526000546000548082038281116110fc579050905060005560006040517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60c05160e052602060e0a360a05160c0518082038281116110fc579050905060a0525b60a051815250565b600080fda165767970657283000307000b005b600080fd' # replace with your contract bytecode
    
    contract_abi = '[{"name": "Paused", "inputs": [], "anonymous": false, "type": "event"}, {"name": "Unpaused", "inputs": [], "anonymous": false, "type": "event"}, {"name": "Transfer", "inputs": [{"name": "sender", "type": "address", "indexed": true}, {"name": "receiver", "type": "address", "indexed": true}, {"name": "amount", "type": "uint256", "indexed": false}], "anonymous": false, "type": "event"}, {"name": "Approval", "inputs": [{"name": "owner", "type": "address", "indexed": true}, {"name": "spender", "type": "address", "indexed": true}, {"name": "amount", "type": "uint256", "indexed": false}], "anonymous": false, "type": "event"}, {"name": "OwnershipTransferred", "inputs": [{"name": "previousOwner", "type": "address", "indexed": true}, {"name": "newOwner", "type": "address", "indexed": true}], "anonymous": false, "type": "event"}, {"name": "Blacklist", "inputs": [{"name": "blackListed", "type": "address", "indexed": true}, {"name": "value", "type": "bool", "indexed": false}], "anonymous": false, "type": "event"}, {"name": "UpdateFees", "inputs": [{"name": "txfee", "type": "uint256", "indexed": false}, {"name": "burnfee", "type": "uint256", "indexed": false}, {"name": "feeAddress", "type": "address", "indexed": true}], "anonymous": false, "type": "event"}, {"stateMutability": "nonpayable", "type": "constructor", "inputs": [{"name": "_txfee", "type": "uint256"}, {"name": "_burnfee", "type": "uint256"}, {"name": "_feeAddress", "type": "address"}], "outputs": []}, {"stateMutability": "pure", "type": "function", "name": "name", "inputs": [], "outputs": [{"name": "", "type": "string"}]}, {"stateMutability": "pure", "type": "function", "name": "symbol", "inputs": [], "outputs": [{"name": "", "type": "string"}]}, {"stateMutability": "pure", "type": "function", "name": "decimals", "inputs": [], "outputs": [{"name": "", "type": "uint8"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "pause", "inputs": [], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "unpause", "inputs": [], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "transfer", "inputs": [{"name": "receiver", "type": "address"}, {"name": "amount", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "transferFrom", "inputs": [{"name": "sender", "type": "address"}, {"name": "receiver", "type": "address"}, {"name": "amount", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "approve", "inputs": [{"name": "spender", "type": "address"}, {"name": "amount", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "burn", "inputs": [{"name": "amount", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "mint", "inputs": [{"name": "receiver", "type": "address"}, {"name": "amount", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "addMinter", "inputs": [{"name": "target", "type": "address"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "permit", "inputs": [{"name": "owner", "type": "address"}, {"name": "spender", "type": "address"}, {"name": "amount", "type": "uint256"}, {"name": "expiry", "type": "uint256"}, {"name": "signature", "type": "bytes"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "updateFees", "inputs": [{"name": "newTxfee", "type": "uint256"}, {"name": "newBurnfee", "type": "uint256"}, {"name": "newFeeAddress", "type": "address"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "blacklist", "inputs": [{"name": "listAddress", "type": "address"}, {"name": "isblackListed", "type": "bool"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "nonpayable", "type": "function", "name": "transferOwnership", "inputs": [{"name": "newOwner", "type": "address"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "view", "type": "function", "name": "totalSupply", "inputs": [], "outputs": [{"name": "", "type": "uint256"}]}, {"stateMutability": "view", "type": "function", "name": "balanceOf", "inputs": [{"name": "arg0", "type": "address"}], "outputs": [{"name": "", "type": "uint256"}]}, {"stateMutability": "view", "type": "function", "name": "allowance", "inputs": [{"name": "arg0", "type": "address"}, {"name": "arg1", "type": "address"}], "outputs": [{"name": "", "type": "uint256"}]}, {"stateMutability": "view", "type": "function", "name": "isPaused", "inputs": [], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "view", "type": "function", "name": "blackListAddresses", "inputs": [{"name": "arg0", "type": "address"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "view", "type": "function", "name": "txfee", "inputs": [], "outputs": [{"name": "", "type": "uint256"}]}, {"stateMutability": "view", "type": "function", "name": "burnfee", "inputs": [], "outputs": [{"name": "", "type": "uint256"}]}, {"stateMutability": "view", "type": "function", "name": "feeAddress", "inputs": [], "outputs": [{"name": "", "type": "address"}]}, {"stateMutability": "view", "type": "function", "name": "owner", "inputs": [], "outputs": [{"name": "", "type": "address"}]}, {"stateMutability": "view", "type": "function", "name": "isMinter", "inputs": [{"name": "arg0", "type": "address"}], "outputs": [{"name": "", "type": "bool"}]}, {"stateMutability": "view", "type": "function", "name": "nonces", "inputs": [{"name": "arg0", "type": "address"}], "outputs": [{"name": "", "type": "uint256"}]}, {"stateMutability": "view", "type": "function", "name": "DOMAIN_SEPARATOR", "inputs": [], "outputs": [{"name": "", "type": "bytes32"}]}]'
    # Create a deployment transaction
    contract = web3.eth.contract(abi=contract_abi, bytecode=contract_bytecode)
    transaction = contract.constructor(1, 1, '0x65F1f314dBd755B53Bbd55D3BAAB077BFdE8F49e').build_transaction({
        'from': '0x293F2c29d2Bc578BF112d59e103a386ad8817f87', # replace with your testnet BNB address
        'nonce': web3.eth.get_transaction_count('0x293F2c29d2Bc578BF112d59e103a386ad8817f87'), # replace with your testnet BNB address
        'gas': 1219695,
        'gasPrice': web3.to_wei('10', 'gwei')
    })

    # Sign and send the deployment transaction
    signed = web3.eth.account.signTransaction(transaction, '123c574b6cbf96e91b372d6059da6f7049004d504822229dfd5927f1678aa44b') # replace with the private key of your testnet BNB address
    transaction_hash = web3.eth.send_raw_transaction(signed.rawTransaction)

    # Wait for the deployment to be mined
    transaction_receipt = web3.eth.wait_for_transaction_receipt(transaction_hash)

    # The contract address is the address of the last returned log
    contract_address = transaction_receipt['contractAddress']
    print(contract_address)

    # Now you can interact with the deployed contract using the contract address and ABI
    # contract_instance = web3.eth.contract(address='0x7a1C309D91740f20Bdd1b2695f457B7B1e31D06c', abi=contract_abi)
    # transaction = contract_instance.functions.mint('0x21c683Ee36243d01dFDB2fbA4f8c1A8FC8C4cD49', 10000000 *10 ** 18,).build_transaction({
    #     'from': '0x21c683Ee36243d01dFDB2fbA4f8c1A8FC8C4cD49', # replace with your testnet BNB address
    #     'nonce': web3.eth.get_transaction_count('0x21c683Ee36243d01dFDB2fbA4f8c1A8FC8C4cD49'), # replace with your testnet BNB address
    #     'gas': 1219695,
    #     'gasPrice': web3.to_wei('5', 'gwei')
    # })
    
    # signed = web3.eth.account.signTransaction(transaction, 'e88b1d0208d41bfc852b597e85e4320389dd338361a53c90ca60ab99ca6e5387') # replace with the private key of your testnet BNB address
    # transaction_hash = web3.eth.send_raw_transaction(signed.rawTransaction)
    
if __name__ == "__main__":
    test_block_number()